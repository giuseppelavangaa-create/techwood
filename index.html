<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>TECH WOOD - Strutture in legno a Certaldo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary: #f0a237;
      --overlay-bg: rgba(0, 0, 0, 0.6);
      --panel-bg: rgba(255, 255, 255, 0.96);
      --transition-fast: 0.25s ease;
      --tw-green: #1f3a32; /* sfondo preload */
      --tw-deep: #0b1613;
      --tw-grid: rgba(255, 255, 255, 0.05);
      --tw-gold: #f0a237;
      --tw-green-sheen: #2d6e5a;
      --site-scale: 1.05;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Poppins", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #000;
      color: #fff;
      overflow-x: hidden;
    }
    body.loading {
        overflow: hidden;
        height: 100vh;
      }

    body.loading section.hero {
      opacity: 0;              /* Nasconde la home */
      pointer-events: none;    /* Disattiva i click */
      filter: blur(8px);
      transition: opacity 0.9s ease, filter 1s ease;
      }

    .auto-mobile,
    .auto-desktop { display: block; }

    @media (min-width: 769px) {
      .auto-mobile { display: none !important; }
    }

    @media (max-width: 768px) {
      .auto-desktop { display: none !important; }
    }

    /* Scrollbar personalizzate coerenti con la palette */
    body,
    .panel,
    .overlay,
    .works-grid,
    .quality-grid {
      scrollbar-width: thin;
      scrollbar-color: rgba(255, 255, 255, 0.38) rgba(12, 18, 16, 0.92);
    }
    body::-webkit-scrollbar,
    .panel::-webkit-scrollbar,
    .overlay::-webkit-scrollbar,
    .works-grid::-webkit-scrollbar,
    .quality-grid::-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }
    body::-webkit-scrollbar-track,
    .panel::-webkit-scrollbar-track,
    .overlay::-webkit-scrollbar-track,
    .works-grid::-webkit-scrollbar-track,
    .quality-grid::-webkit-scrollbar-track {
      background: rgba(12, 18, 16, 0.65);
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(4px);
    }
    body::-webkit-scrollbar-thumb,
    .panel::-webkit-scrollbar-thumb,
    .overlay::-webkit-scrollbar-thumb,
    .works-grid::-webkit-scrollbar-thumb,
    .quality-grid::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.28), rgba(255, 255, 255, 0.08));
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.35);
    }
    body::-webkit-scrollbar-thumb:hover,
    .panel::-webkit-scrollbar-thumb:hover,
    .overlay::-webkit-scrollbar-thumb:hover,
    .works-grid::-webkit-scrollbar-thumb:hover,
    .quality-grid::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.34), rgba(255, 255, 255, 0.12));
      box-shadow: 0 4px 14px rgba(0, 0, 0, 0.45);
    }

    /* Scala il layout del 10% mantenendo testi e pulsanti centrati */
    .tw-topbar-inner,
    .tw-bottombar-inner,
    .hero-inner,
    .panel,
    .social-fab {
      scale: var(--site-scale);
    }

    .tw-topbar-inner,
    .tw-bottombar-inner {
      transform-origin: center top;
    }

    .hero-inner,
    .panel {
      transform-origin: center top;
    }

    .social-fab {
      transform-origin: right bottom;
    }

    /* Scala meno su tablet/phone per evitare overflow */
    @media (max-width: 1200px) {
      :root { --site-scale: 1; }
    }
    @media (max-width: 768px) {
      :root { --site-scale: 1; }
      .tw-topbar-inner,
      .tw-bottombar-inner,
      .hero-inner,
      .panel,
      .social-fab { scale: 1; width: 100%; }
      .tw-bottombar { height: auto; padding: 12px 16px; }
      .tw-bottombar-inner { flex-wrap: wrap; gap: 8px; text-align: center; }
    }


     /* =====================
       PRELOADER TECH WOOD
       ===================== */

    .tw-preloader-overlay {
      position: fixed;
      inset: 0;
      z-index: 9999;
      background: radial-gradient(circle at 50% 15%, #16352c, #0f1e18 60%, #050908 100%);
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      gap: 18px;
      transition: opacity 0.85s ease, transform 0.85s ease, visibility 0.85s ease;
      animation: tw-bg-flow 10s ease-in-out infinite alternate;
      transform: translateY(0);
      will-change: opacity, transform;
    }

    .tw-preloader-overlay::before {
      content: "";
      position: absolute;
      inset: -20%;
      background: radial-gradient(circle at 20% 20%, rgba(240, 162, 55, 0.08), transparent 35%),
                  radial-gradient(circle at 80% 30%, rgba(0, 168, 89, 0.14), transparent 40%),
                  radial-gradient(circle at 50% 80%, rgba(240, 162, 55, 0.06), transparent 45%);
      opacity: 0.8;
      animation: tw-aurora 12s ease-in-out infinite;
    }

    .tw-preloader-overlay.hidden {
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
    }

    .tw-preloader-overlay.fly-out {
      opacity: 0;
      transform: translateY(-6px);
    }

    .tw-preloader-inner {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
      animation: tw-pop-in 0.8s ease-out both;
      padding: 26px 22px;
      position: relative;
      z-index: 1;
    }

    .tw-preloader-logo {
      max-width: 260px;
      max-height: 260px;
      display: block;
      filter:
        drop-shadow(0 12px 26px rgba(0, 0, 0, 0.85))
        drop-shadow(0 0 16px rgba(196, 255, 213, 0.55));
      opacity: 0;
      animation:
        tw-logo-glow 1.9s ease-out forwards,
        tw-logo-breathe 3.6s ease-in-out 2s infinite;
    }

    .tw-preloader-overlay.fly-out {
      pointer-events: none;
    }

    .tw-preloader-pulse {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    /* SCRITTA TECH WOOD PI? GRANDE, VERDE, GLOW */
    .tw-preloader-text {
      font-size: clamp(1.9rem, 4vw, 2.8rem);   /* pi? grande e adattiva */
      letter-spacing: 0.28em;
      text-transform: uppercase;
      text-indent: 0.28em;
      font-weight: 600;
      color: #00a859;
      opacity: 0;
      transform: translateY(4px);
      animation: tw-text-fade 1.4s ease-out 0.5s forwards;
      text-shadow:
        0 0 6px rgba(0, 0, 0, 0.9),
        0 0 14px rgba(0, 168, 89, 0.85);
    }

    .tw-preloader-overlay.fade-out-logo .tw-preloader-logo,
    .tw-preloader-overlay.fade-out-logo .tw-preloader-text {
      opacity: 0;
      transform: translateY(-10px);
      transition: opacity 0.9s ease, transform 0.9s ease;
    }

    /* TOPBAR POST-PRELOAD */
    .tw-topbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 76px;
      background: linear-gradient(180deg, #2c2c2c, #1f1f1f);
      border-bottom: 1px solid rgba(255, 255, 255, 0.06);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0 28px;
      transform: translateY(-110%);
      opacity: 0;
      transition: transform 0.7s ease, opacity 0.7s ease;
      z-index: 900;
      backdrop-filter: blur(6px);
    }

    body.preload-complete .tw-topbar {
      transform: translateY(0);
      opacity: 1;
    }

    .tw-topbar-inner {
      width: min(calc(1200px / var(--site-scale)), calc(100% / var(--site-scale)));
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .tw-topbar-logo {
      height: clamp(56px, 7vw, 68px);
      width: auto;
      object-fit: contain;
      filter: drop-shadow(0 6px 14px rgba(0,0,0,0.45));
      opacity: 1;
      transform: none;
      image-rendering: auto;
    }

    body.preload-complete .tw-topbar-logo {
      animation: none;
    }

    @keyframes tw-pop-in {
      0% {
        opacity: 0;
        transform: translateY(16px) scale(0.96);
      }
      100% {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    @keyframes tw-bg-flow {
      0% { filter: hue-rotate(0deg) brightness(1); }
      100% { filter: hue-rotate(-10deg) brightness(1.02); }
    }

    @keyframes tw-aurora {
      0% { transform: translateY(0px) scale(1); opacity: 0.7; }
      50% { transform: translateY(-12px) scale(1.02); opacity: 0.9; }
      100% { transform: translateY(8px) scale(1.01); opacity: 0.75; }
    }

    @keyframes tw-ring-spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    @keyframes tw-pulse {
      0%, 100% { transform: scale(1); opacity: 0.8; }
      50% { transform: scale(1.05); opacity: 1; }
    }

    @keyframes tw-logo-glow {
      0% {
        opacity: 0;
        transform: scale(0.92);
        filter:
          drop-shadow(0 0 0 rgba(0,0,0,0))
          drop-shadow(0 0 0 rgba(196,255,213,0));
      }
      55% {
        opacity: 1;
        transform: scale(1.02);
        filter:
          drop-shadow(0 12px 30px rgba(0,0,0,0.9))
          drop-shadow(0 0 18px rgba(196,255,213,0.7));
      }
      100% {
        opacity: 1;
        transform: scale(1);
        filter:
          drop-shadow(0 10px 24px rgba(0,0,0,0.85))
          drop-shadow(0 0 10px rgba(196,255,213,0.35));
      }
    }

    @keyframes tw-logo-breathe {
      0%, 100% {
        transform: scale(1);
        filter:
          drop-shadow(0 10px 24px rgba(0,0,0,0.85))
          drop-shadow(0 0 10px rgba(196,255,213,0.35));
      }
      50% {
        transform: scale(1.05);
        filter:
          drop-shadow(0 14px 30px rgba(0,0,0,0.95))
          drop-shadow(0 0 18px rgba(196,255,213,0.6));
      }
    }

    @keyframes tw-text-fade {
      0% {
        opacity: 0;
        letter-spacing: 0.5em;
        transform: translateY(6px);
      }
      100% {
        opacity: 1;
        letter-spacing: 0.28em;
        transform: translateY(0);
      }
    }

    @keyframes tw-topbar-logo-in {
      0% { opacity: 0; transform: translate(-18px, -16px) scale(0.78); }
      100% { opacity: 1; transform: translate(0,0) scale(1); }
    }

    /* =========================
       BOTTOM BAR INFO
       ========================= */
    .tw-bottombar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: 64px;
      background: linear-gradient(180deg, #1f1f1f, #161616);
      border-top: 1px solid rgba(255, 255, 255, 0.06);
      box-shadow: 0 -12px 40px rgba(0, 0, 0, 0.35);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0 24px;
      z-index: 850;
      backdrop-filter: blur(6px);
    }

    .tw-bottombar-inner {
      width: min(calc(1200px / var(--site-scale)), calc(100% / var(--site-scale)));
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      color: #e8e8e8;
      font-size: 13px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .tw-bottombar a {
      color: #e8e8e8;
      text-decoration: none;
      transition: color 0.2s ease;
    }

    .tw-bottombar a:hover {
      color: #00a859;
    }

    .tw-bottombar-sep {
      opacity: 0.4;
    }

    /* =========================
       HERO + BACKGROUND
       ========================= */
    .hero {
      position: relative;
      min-height: 100vh;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px clamp(20px, 4vw, 60px);
      overflow: hidden;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;

      opacity: 1;
      transition: opacity 0.8s ease-in-out;
      isolation: isolate;
    }
    @media (max-width: 900px) {
      .hero { background-attachment: scroll; }
    }

    .hero-slider {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: 0;
    }
    .hero-slide {
      position: absolute;
      inset: 0;
      opacity: 0;
      transition: opacity 0.7s ease;
    }
    .hero-slide.is-active { opacity: 1; }
    .hero-slide img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
      display: block;
    }
    .hero-gradient {
      position: absolute;
      inset: 0;
      background: linear-gradient(to bottom, rgba(0,0,0,0.2), rgba(0,0,0,0.65));
      pointer-events: none;
      z-index: 1;
    }

    .hero::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(
        to bottom,
        rgba(0,0,0,0.35),
        rgba(0,0,0,0.55)
      );
      z-index: -1;
    }

    .hero-inner {
      width: min(calc(1200px / var(--site-scale)), calc(100% / var(--site-scale)));
      max-width: none;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      gap: 60px;
      position: relative;
      z-index: 2;
    }

    /* TITOLO A SINISTRA */
    .hero-top {
      flex: 1;
      text-align: center;
      margin-left: 0;
    }

    .hero-title {
      font-size: clamp(40px, 6vw, 60px);
      font-weight: 500;
      text-transform: none;
      letter-spacing: 0.16em;
      white-space: nowrap;
    }

    .hero-subtitle {
      margin-top: 8px;
      font-size: 14px;
      font-weight: 300;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      opacity: 0.9;
    }

    /* =========================
       MENU QUADRATI 2x2 A DESTRA
       ========================= */
    .hero-menu {
      flex: 1;
      display: flex;
      justify-content: center;
    }

    .menu-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(180px, 240px));
      gap: 26px;
    }

    .menu-card {
      border: 1px solid rgba(255,255,255,0.45);
      border-radius: 12px;
      padding: 24px 18px;
      text-align: center;
      background: linear-gradient(145deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      cursor: pointer;
      box-shadow:
        0 16px 40px rgba(0, 0, 0, 0.35),
        0 0 0 1px rgba(255,255,255,0.06) inset;
      transition: background-color var(--transition-fast),
                  transform var(--transition-fast),
                  box-shadow var(--transition-fast),
                  border-color var(--transition-fast),
                  filter var(--transition-fast);
    }

    .menu-card:hover {
      background: linear-gradient(145deg, rgba(255,255,255,0.16), rgba(255,255,255,0.05));
      transform: translateY(-3px);
      box-shadow:
        0 20px 48px rgba(0,0,0,0.45),
        0 0 0 1px rgba(255,255,255,0.12) inset;
      border-color: rgba(255,255,255,0.75);
      filter: brightness(1.05);
    }

    .menu-icon {
      font-size: 26px;
      margin-bottom: 10px;
    }

    .menu-label {
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.18em;
    }

    /* ========= Tablet desktop piccolo ========= */
    @media (max-width: 1024px) {
      .hero-top {
        margin-left: 0;
      }
    }

    /* ========= Tablet / telefono grande ========= */
    @media (max-width: 900px) {
      .hero-inner {
        flex-direction: column;
        align-items: center;
        text-align: center;
        gap: 40px;
      }

      .hero-top {
        text-align: center;
        margin-left: 0;   /* niente spostamento su tablet/phone */
      }

      .hero-menu {
        justify-content: center;
        width: 100%;
      }

      .menu-grid {
        grid-template-columns: 1fr 1fr;
        gap: 18px;
      }

      .menu-card {
        padding: 18px 12px;
      }
    }

    /* ========= Smartphone ========= */
    @media (max-width: 600px) {
      .hero {
        padding-inline: 18px;
      }

      .hero-title {
        letter-spacing: 0.16em;
      }

      .menu-grid {
        grid-template-columns: 1fr 1fr;
        gap: 14px;
      }

      .menu-card {
        padding: 16px 10px;
      }
    }

    /* ========= Smartphone stretto ========= */
    @media (max-width: 480px) {
      .hero { padding-inline: 14px; }
      .hero-title { white-space: normal; line-height: 1.2; }
      .menu-grid { grid-template-columns: 1fr; }
    }

    /* =========================
       OVERLAY / POPUP
       ========================= */
    .overlay {
      position: fixed;
      inset: 0;
      display: none;
      justify-content: center;
      align-items: center;
      background: var(--overlay-bg);
      backdrop-filter: blur(8px);
      z-index: 1000;
      padding: 20px;
    }

    .overlay.active {
      display: flex;
    }

    .panel {
      background: rgba(255, 255, 255, 0.12);
      color: #f5f5f5;
      padding: clamp(20px, 4vw, 40px);
      border-radius: 16px;
      max-width: calc(960px / var(--site-scale));
      width: calc(100% / var(--site-scale));
      max-height: calc(90vh / var(--site-scale));
      overflow-y: auto;
      box-shadow: 0 18px 60px rgba(0, 0, 0, 0.45);
      position: relative;
      animation: fadeInUp 0.35s ease;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.18);
    }

    .panel.panel-works {
      max-width: calc(1200px / var(--site-scale));
    }

    .panel-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 16px;
      margin-bottom: 14px;
    }

    .panel-title {
      font-size: 20px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.15em;
    }

    .close-btn {
      border: none;
      background: transparent;
      font-size: 22px;
      cursor: pointer;
      color: #555;
      padding: 4px;
      line-height: 1;
      transition: color var(--transition-fast), transform var(--transition-fast);
    }

    .close-btn:hover {
      color: #000;
      transform: scale(1.06);
    }

    .panel-content {
      font-size: 15px;
      line-height: 1.7;
      color: #ededed;
    }

    .panel-content p + p {
      margin-top: 10px;
    }

    .panel-highlight {
      margin-top: 12px;
      padding: 12px 14px;
      border-left: 3px solid rgba(0, 168, 89, 0.45);
      background: linear-gradient(135deg, rgba(0, 168, 89, 0.14), rgba(255, 255, 255, 0.04));
      border-radius: 6px;
      font-size: 14px;
      color: #e8f7ef;
    }

    .panel-grid {
      display: grid;
      grid-template-columns: 2fr 3fr;
      gap: 20px;
      margin-top: 12px;
      align-items: flex-start;
    }

    .panel-grid img {
      width: 100%;
      border-radius: 10px;
      object-fit: cover;
    }

    .quality-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 14px;
      margin-top: 12px;
    }

    .quality-card {
      background: rgba(12, 12, 12, 0.72);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 16px;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.28);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
    }

    .quality-media {
      position: relative;
      overflow: hidden;
      border-radius: 10px;
      margin-bottom: 12px;
      border: 1px solid rgba(255, 255, 255, 0.08);
    }

    .quality-photo {
      display: block;
      width: 100%;
      height: 140px;
      object-fit: cover;
      filter: saturate(1.05);
    }

    .quality-chip {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(255, 255, 255, 0.12);
      font-size: 12px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
    }

    .quality-card h4 {
      margin-top: 8px;
      font-size: 16px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .quality-card p {
      margin-top: 8px;
      color: #e7e7e7;
      line-height: 1.6;
    }

    .quality-list {
      margin-top: 10px;
      list-style: none;
      padding-left: 0;
    }

    .quality-list li {
      position: relative;
      padding-left: 18px;
      margin-bottom: 6px;
      color: #dfeae3;
    }

    .quality-list li::before {
      content: "-";
      position: absolute;
      left: 2px;
      color: #f0a237;
    }

    @media (max-width: 780px) {
      .panel-grid {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 720px) {
      .panel {
        width: 100%;
        max-width: 100%;
        max-height: 88vh;
        padding: 16px 14px;
      }
      .panel-header {
        flex-direction: row;
        align-items: flex-start;
        gap: 10px;
      }
      .panel-title { font-size: 18px; }
      .close-btn { margin-left: auto; }
    }

    .works-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 16px;
      grid-auto-rows: 300px;
      margin-top: 12px;
      align-items: stretch;
    }

    .works-grid img { border-radius: 10px; }

    .works-card {
      position: relative;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 12px 30px rgba(0,0,0,0.35);
      isolation: isolate;
      background: #0d0d0d;
      border: 1px solid rgba(255,255,255,0.12);
      display: flex;
      align-items: stretch;
      justify-content: stretch;
    }

    .works-card::after {
      display: none;
    }

    .works-card-cta {
      position: absolute;
      bottom: 12px;
      right: 12px;
      padding: 8px 12px;
      background: rgba(0,0,0,0.55);
      border: 1px solid rgba(255,255,255,0.18);
      border-radius: 999px;
      font-size: 11px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: #fefefe;
      box-shadow: 0 8px 20px rgba(0,0,0,0.35);
      transition: transform var(--transition-fast), background-color var(--transition-fast);
    }

    .works-card:hover .works-card-cta {
      transform: translateY(-2px);
      background: rgba(0,0,0,0.72);
    }

    .works-card img {
      display: block;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .works-card-label {
      position: absolute;
      left: 12px;
      bottom: 10px;
      z-index: 2;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      font-size: 12px;
    }

    .works-section {
      margin-top: 16px;
    }

    .works-section-title {
      font-size: 14px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      margin-bottom: 10px;
      color: #cde8d9;
    }

    .works-hint {
      font-size: 13px;
      color: #d8e4dc;
      opacity: 0.82;
      margin-top: 6px;
      letter-spacing: 0.04em;
    }

    .works-sections-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 18px;
      margin-top: 12px;
    }

    @media (max-width: 720px) {
      .works-sections-grid {
        grid-template-columns: 1fr;
      }
    }

    .work-trigger {
      cursor: pointer;
    }

    .image-viewer-panel {
      background: transparent;
      border: none;
      box-shadow: none;
      padding: 0;
      max-width: none;
      width: auto;
    }

    .image-viewer-frame {
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
      max-width: 90vw;
      max-height: 90vh;
    }

    .image-viewer-img {
      max-width: 90vw;
      max-height: 90vh;
      border-radius: 14px;
      box-shadow: 0 14px 40px rgba(0, 0, 0, 0.7);
      border: 1px solid rgba(255, 255, 255, 0.18);
    }

    .image-viewer-close {
      position: absolute;
      top: -46px;
      right: -6px;
      background: rgba(0,0,0,0.6);
      color: #fff;
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 999px;
      width: 38px;
      height: 38px;
      display: grid;
      place-items: center;
      cursor: pointer;
      transition: transform var(--transition-fast), background-color var(--transition-fast);
    }

    .image-viewer-close:hover {
      transform: translateY(-2px);
      background: rgba(0,0,0,0.8);
    }

    .contact-list {
      list-style: none;
      margin-top: 10px;
    }

    .contact-list li {
      margin-bottom: 8px;
    }

    .contact-label {
      font-weight: 600;
      margin-right: 4px;
    }

    .link-inline {
      color: #005eaa;
      text-decoration: none;
    }

    .link-inline:hover {
      text-decoration: underline;
    }

    .contact-cta {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      margin-top: 16px;
      padding: 12px 20px;
      border-radius: 999px;
      background: linear-gradient(135deg, rgba(37, 211, 102, 0.95), rgba(18, 140, 126, 0.9));
      color: #fff;
      text-decoration: none;
      font-weight: 600;
      letter-spacing: 0.06em;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.35);
      transition: transform 0.2s ease, box-shadow 0.2s ease, filter 0.2s ease;
      border: 1px solid rgba(255, 255, 255, 0.14);
    }

    .contact-cta:hover {
      transform: translateY(-1px);
      box-shadow: 0 16px 36px rgba(0, 0, 0, 0.45);
      filter: brightness(1.05);
    }

    .contact-cta svg {
      width: 18px;
      height: 18px;
      fill: currentColor;
    }

    .map-placeholder {
      margin-top: 12px;
      border-radius: 10px;
      border: 1px solid #ddd;
      padding: 12px;
      background: #fafafa;
      font-size: 14px;
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(14px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* =========================
       SOCIAL FLOATING BUTTONS
       ========================= */
    .social-fab {
      position: fixed;
      right: 20px;
      bottom: 90px;
      display: flex;
      flex-direction: row;
      gap: 12px;
      z-index: 1300;
    }

    .social-btn {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      display: grid;
      place-items: center;
      color: #fff;
      text-decoration: none;
      box-shadow: 0 10px 30px rgba(0,0,0,0.35);
      transition: transform 0.2s ease, box-shadow 0.2s ease, filter 0.2s ease;
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
    }

    .social-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 14px 36px rgba(0,0,0,0.45);
      filter: brightness(1.06);
    }

    .social-btn svg {
      width: 22px;
      height: 22px;
      fill: currentColor;
    }

    .social-btn--fb { background: linear-gradient(135deg, #1877f2, #0e52b1); }
    .social-btn--ig { background: linear-gradient(135deg, #f77737, #e1306c 50%, #8a3ab9); }
    .social-btn--wa { background: linear-gradient(135deg, #25d366, #128c7e); }

    @media (max-width: 640px) {
      .social-fab {
        right: 10px;
        bottom: 14px;
        gap: 8px;
        flex-direction: column;
        align-items: flex-end;
      }
      .social-btn {
        width: 44px;
        height: 44px;
      }
      .social-btn svg {
        width: 20px;
        height: 20px;
      }
    }
  </style>
</head>
<body class="loading">

<div class="tw-topbar" id="tw-topbar">
  <div class="tw-topbar-inner">
    <img src="img/immlogo.jpg" alt="Tech Wood logo" class="tw-topbar-logo">
  </div>
</div>

<!-- PRELOADER TECH WOOD ? NEW MINIMAL + PULSE + COLORI FINALI -->
  <div id="tw-preloader" class="tw-preloader-overlay">
    <div class="tw-preloader-inner">
      <div class="tw-preloader-pulse">
        <img src="img/immlogo.jpg" alt="Tech Wood logo" class="tw-preloader-logo">
      </div>
      <div class="tw-preloader-text">TECH WOOD</div>
    </div>
  </div>

  <!-- PULSANTI SOCIAL FISSI -->
  <div class="social-fab" aria-label="Social Tech Wood">
    <a class="social-btn social-btn--fb" href="https://www.facebook.com/techwoodcertaldo" target="_blank" rel="noopener noreferrer" aria-label="Facebook">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path d="M22 12.07C22 6.5 17.52 2 12 2S2 6.5 2 12.07c0 5.02 3.66 9.18 8.44 9.93v-7.02H8.08v-2.91h2.36V9.79c0-2.33 1.39-3.62 3.52-3.62.7 0 1.82.12 2.3.21v2.53h-1.3c-1.27 0-1.66.8-1.66 1.62v1.94h2.83l-.45 2.91h-2.38V22c4.78-.75 8.44-4.91 8.44-9.93Z"/>
      </svg>
    </a>
    <a class="social-btn social-btn--ig" href="https://www.instagram.com/techwoodcertaldo" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path d="M7 3h10a4 4 0 0 1 4 4v10a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V7a4 4 0 0 1 4-4Zm0 2a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2H7Zm5 3.5A3.5 3.5 0 1 1 8.5 12 3.5 3.5 0 0 1 12 8.5Zm0 2A1.5 1.5 0 1 0 13.5 12 1.5 1.5 0 0 0 12 10.5Zm4.25-3.4a1.1 1.1 0 1 1-1.1 1.1 1.1 1.1 0 0 1 1.1-1.1Z"/>
      </svg>
    </a>
    <a class="social-btn social-btn--wa" href="https://wa.me/390000000000" target="_blank" rel="noopener noreferrer" aria-label="WhatsApp">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path d="M17.48 14.36c-.27-.14-1.6-.79-1.85-.87-.25-.09-.43-.14-.62.14-.18.27-.71.87-.87 1.05-.16.18-.32.2-.6.07-.27-.14-1.14-.42-2.18-1.33-.8-.71-1.34-1.58-1.5-1.85-.16-.27-.02-.41.12-.54.13-.13.27-.32.4-.47.14-.16.18-.27.27-.45.09-.18.05-.34-.02-.47-.07-.14-.62-1.5-.85-2.05-.22-.53-.44-.46-.62-.47l-.53-.01c-.18 0-.47.07-.72.34-.25.27-.95.93-.95 2.27 0 1.34.98 2.64 1.12 2.82.14.18 1.93 2.95 4.67 4.02.65.28 1.15.45 1.54.57.65.21 1.23.18 1.69.11.52-.08 1.6-.65 1.82-1.27.22-.62.22-1.15.15-1.27-.07-.11-.25-.18-.52-.32Z"/>
        <path d="M12 2a10 10 0 0 0-8.74 14.9L2 22l5.22-1.22A10 10 0 1 0 12 2Zm0 18a7.93 7.93 0 0 1-4.05-1.1l-.29-.17-3.07.71.65-2.99-.19-.31a7.93 7.93 0 1 1 6.95 3.86Z"/>
      </svg>
    </a>
  </div>

  <div class="tw-bottombar">
    <div class="tw-bottombar-inner">
      <span>Tech Wood © 2025</span>
      <span class="tw-bottombar-sep">•</span>
      <a href="#">Privacy</a>
      <span class="tw-bottombar-sep">•</span>
      <a href="#">Cookie</a>
    </div>
  </div>

  <!-- =========================
       HERO SECTION
       ========================= -->
  <section class="hero" id="hero">
    <div class="hero-slider">
      <figure class="hero-slide is-active">
        <img src="img/slide/slide1.jpg" alt="Struttura in legno Tech Wood">
      </figure>
      <figure class="hero-slide">
        <img src="img/slide/slide2.jpg" alt="Dettaglio realizzazione Tech Wood">
      </figure>
      <figure class="hero-slide">
        <img src="img/slide/slide3.jpg" alt="Pavimentazione in legno Tech Wood">
      </figure>
      <figure class="hero-slide">
        <img src="img/slide/slide4.jpg" alt="Area relax in legno Tech Wood">
      </figure>
      <figure class="hero-slide">
        <img src="img/slide/slide5.jpg" alt="Copertura in legno Tech Wood">
      </figure>
      <figure class="hero-slide">
        <img src="img/slide/slide6.jpg" alt="Pergola in legno Tech Wood">
      </figure>
      <figure class="hero-slide">
        <img src="img/slide/slide7.jpg" alt="Carporter in legno Tech Wood">
      </figure>
      <figure class="hero-slide">
        <img src="img/slide/slide8.jpg" alt="Area bimbi in legno Tech Wood">
      </figure>
      <figure class="hero-slide">
        <img src="img/slide/slide9.jpg" alt="Rimessa in legno Tech Wood">
      </figure>
      <figure class="hero-slide">
        <img src="img/slide/slide10.jpg" alt="Studio in legno Tech Wood">
      </figure>
      <figure class="hero-slide">
        <img src="img/slide/slide11.jpg" alt="Studio in legno Tech Wood">
      </figure>
      <figure class="hero-slide">
        <img src="img/slide/slide12.jpg" alt="Studio in legno Tech Wood">
      </figure>
      <figure class="hero-slide">
        <img src="img/slide/slide13.jpg" alt="Studio in legno Tech Wood">
      </figure>
      <figure class="hero-slide">
        <img src="img/slide/slide14.jpg" alt="Studio in legno Tech Wood">
      </figure>
      <figure class="hero-slide">
        <img src="img/slide/slide15.jpg" alt="Studio in legno Tech Wood">
      </figure>

    </div>
    <div class="hero-gradient"></div>
    <div class="hero-inner">

      <!-- LOGO + TESTO A SINISTRA -->
      <div class="hero-top">
        <h1 class="hero-title">TECH WOOD</h1>
        <p class="hero-subtitle">La bellezza del legno. La solidità dei sogni.</p>
      </div>

      <!-- 4 BOTTONI A DESTRA -->
      <div class="hero-menu">
        <div class="menu-grid">
          <div class="menu-card" onclick="openOverlay('chi-siamo')">
            <div class="menu-label">Chi siamo</div>
          </div>

          <div class="menu-card" onclick="openOverlay('i-nostri-lavori')">
            <div class="menu-label">I nostri lavori</div>
          </div>

          <div class="menu-card" onclick="openOverlay('contatti')">
            <div class="menu-label">Contatti</div>
          </div>

          <div class="menu-card" onclick="openOverlay('qualita')">
            <div class="menu-label">Qualità</div>
          </div>
        </div>
      </div>

    </div>
  </section>

  <!-- =========================
       OVERLAY: CHI SIAMO
       ========================= -->
  <div id="overlay-chi-siamo" class="overlay">
    <div class="panel">
      <div class="panel-header">
        <h2 class="panel-title">Chi Siamo</h2>
        <button class="close-btn" onclick="closeOverlay('chi-siamo')" aria-label="Chiudi">x</button>
      </div>
      <div class="panel-grid panel-content">
        <div>
          <p>
            TECH WOOD è un'azienda giovane e dinamica nata dalla passione per la lavorazione
            artigianale del legno. Progettiamo e realizziamo strutture e complementi su misura
            con legnami di elevata qualità, trattati per resistere nel tempo in esterno e pensati
            per valorizzare ogni contesto.
          </p>
          <p>
            Ogni progetto viene studiato nei dettagli per combinare estetica, funzionalità e
            durata: sopralluogo, progettazione, scelta dei materiali, montaggio e finiture
            vengono seguiti direttamente dal nostro team.
          </p>
          <div class="panel-highlight">
            Specializzati in pensiline e tettoie, pedane e pavimentazioni su misura, travi e
            perline, staccionate, piscine, gazebo e pergolati in legno lamellare.
          </div>
        </div>
        <div>
          <img src="img/immlogo.jpg" alt="Laboratorio e lavorazioni in legno TECH WOOD">
        </div>
      </div>
    </div>
  </div>

  <!-- =========================
       OVERLAY: I NOSTRI LAVORI
       ========================= -->
  <div id="overlay-i-nostri-lavori" class="overlay">
    <div class="panel panel-works">
      <div class="panel-header">
        <h2 class="panel-title">I Nostri Lavori</h2>
        <button class="close-btn" onclick="closeOverlay('i-nostri-lavori')" aria-label="Chiudi">x</button>
      </div>
      <div class="panel-content">
        <p>
          Scopri le realizzazioni TECH WOOD organizzate per tipologia: soluzioni su misura per pergole, carport,
          aree gioco, rivestimenti piscina, rimesse e studi.
        </p>
        <p class="works-hint">Clicca sul titolo o sull'anteprima per aprire tutte le foto della categoria.</p>

        <div class="works-sections-grid">
          <div class="works-section">
            <h3 class="works-section-title work-trigger" data-work-key="pergole">Pergole</h3>
            <div class="works-grid">
              <div class="works-card work-trigger" data-work-key="pergole">
                <img src="img/pergole/pergole1.jpg" alt="Pergola in legno Tech Wood">
                <span class="works-card-cta">Clicca qui</span>
              </div>
            </div>
          </div>

          <div class="works-section">
            <h3 class="works-section-title work-trigger" data-work-key="carporter">Carporter</h3>
            <div class="works-grid">
              <div class="works-card work-trigger" data-work-key="carporter">
                <img src="img/carporter/carporter1.jpg" alt="Carporter in legno Tech Wood">
                <span class="works-card-cta">Clicca qui</span>
              </div>
            </div>
          </div>

          <div class="works-section">
            <h3 class="works-section-title work-trigger" data-work-key="area-bimbi">Area bimbi</h3>
            <div class="works-grid">
              <div class="works-card work-trigger" data-work-key="area-bimbi">
                <img src="img/area-bimbi/area-bimbi1.jpg" alt="Area bimbi in legno Tech Wood">
                <span class="works-card-cta">Clicca qui</span>
              </div>
            </div>
          </div>

          <div class="works-section">
            <h3 class="works-section-title work-trigger" data-work-key="rivestimenti-piscine">Rivestimenti piscine</h3>
            <div class="works-grid">
              <div class="works-card work-trigger" data-work-key="rivestimenti-piscine">
                <img src="img/piscine/piscine1.jpg" alt="Rivestimento piscina in legno Tech Wood">
                <span class="works-card-cta">Clicca qui</span>
              </div>
            </div>
          </div>

          <div class="works-section">
            <h3 class="works-section-title work-trigger" data-work-key="rimesse">Rimesse</h3>
            <div class="works-grid">
              <div class="works-card work-trigger" data-work-key="rimesse">
                <img src="img/rimesse/rimesse1.jpg" alt="Rimessa in legno Tech Wood">
                <span class="works-card-cta">Clicca qui</span>
              </div>
            </div>
          </div>

          <div class="works-section">
            <h3 class="works-section-title work-trigger" data-work-key="studi">Studi</h3>
            <div class="works-grid">
              <div class="works-card work-trigger" data-work-key="studi">
                <img src="img/strutture/immlavori6.jpg" alt="Studio in legno Tech Wood">
                <span class="works-card-cta">Clicca qui</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- =========================
       OVERLAY: DETTAGLIO LAVORI
       ========================= -->
  <div id="overlay-work-detail" class="overlay">
    <div class="panel panel-works">
      <div class="panel-header">
        <h2 class="panel-title" id="work-detail-title">Lavori</h2>
        <button class="close-btn" onclick="closeOverlay('work-detail')" aria-label="Chiudi">x</button>
      </div>
      <div class="panel-content">
        <p>Guarda tutte le foto della categoria selezionata.</p>
        <div id="work-detail-grid" class="works-grid"></div>
      </div>
    </div>
  </div>

  <!-- =========================
       OVERLAY: VIEWER IMMAGINI
       ========================= -->
  <div id="overlay-image-viewer" class="overlay">
    <div class="panel image-viewer-panel">
      <div class="image-viewer-frame">
        <button class="image-viewer-close" onclick="closeOverlay('image-viewer')" aria-label="Chiudi immagine">x</button>
        <img id="image-viewer-img" class="image-viewer-img" src="" alt="">
      </div>
    </div>
  </div>

  <!-- =========================
       OVERLAY: CONTATTI
       ========================= -->
  <div id="overlay-contatti" class="overlay">
    <div class="panel">
      <div class="panel-header">
        <h2 class="panel-title">Contatti</h2>
        <button class="close-btn" onclick="closeOverlay('contatti')" aria-label="Chiudi">x</button>
      </div>
      <div class="panel-content">
        <p>Per informazioni, sopralluoghi o preventivi puoi contattarci:</p>

        <ul class="contact-list">
          <li>
            <span class="contact-label">Telefono:</span>
            <a href="tel:+39XXXXXXXXXX" class="link-inline">+39 XXX XXX XXXX</a>
          </li>
          <li>
            <span class="contact-label">Email:</span>
            <a href="mailto:info@techwoodcertaldo.it" class="link-inline">
              info@techwoodcertaldo.it
            </a>
          </li>
          <li>
            <span class="contact-label">WhatsApp:</span>
            <a href="https://wa.me/39XXXXXXXXXX" target="_blank" class="link-inline">
              scrivici su WhatsApp
            </a>
          </li>
        </ul>

        <a class="contact-cta" href="https://wa.me/39XXXXXXXXXX" target="_blank" rel="noopener noreferrer">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M17.48 14.36c-.27-.14-1.6-.79-1.85-.87-.25-.09-.43-.14-.62.14-.18.27-.71.87-.87 1.05-.16.18-.32.2-.6.07-.27-.14-1.14-.42-2.18-1.33-.8-.71-1.34-1.58-1.5-1.85-.16-.27-.02-.41.12-.54.13-.13.27-.32.4-.47.14-.16.18-.27.27-.45.09-.18.05-.34-.02-.47-.07-.14-.62-1.5-.85-2.05-.22-.53-.44-.46-.62-.47l-.53-.01c-.18 0-.47.07-.72.34-.25.27-.95.93-.95 2.27 0 1.34.98 2.64 1.12 2.82.14.18 1.93 2.95 4.67 4.02.65.28 1.15.45 1.54.57.65.21 1.23.18 1.69.11.52-.08 1.6-.65 1.82-1.27.22-.62.22-1.15.15-1.27-.07-.11-.25-.18-.52-.32Z"/>
            <path d="M12 2a10 10 0 0 0-8.74 14.9L2 22l5.22-1.22A10 10 0 1 0 12 2Zm0 18a7.93 7.93 0 0 1-4.05-1.1l-.29-.17-3.07.71.65-2.99-.19-.31a7.93 7.93 0 1 1 6.95 3.86Z"/>
          </svg>
          Chatta su WhatsApp
        </a>

        <div class="panel-highlight">
          Nella richiesta indica dove si trova il tuo spazio esterno e che tipo di struttura hai in
          mente: ti ricontatteremo con una proposta su misura.
        </div>
      </div>
    </div>
  </div>




  <!-- =========================
       OVERLAY: QUALITA
       ========================= -->

  <div id="overlay-qualita" class="overlay">
    <div class="panel">
      <div class="panel-header">
        <h2 class="panel-title">Qualità e lavorazioni</h2>
        <button class="close-btn" onclick="closeOverlay('qualita')" aria-label="Chiudi">x</button>
      </div>
      <div class="panel-content">
        <p>
          Selezioniamo legni certificati e li proteggiamo con impregnanti, oli e vernici specifiche per l'esterno.
          Progettiamo, prefabbrichiamo e montiamo seguendo le norme su carichi e ancoraggi, così le strutture restano stabili,
          sicure e belle nel tempo anche a contatto con acqua e sole.
        </p>

        <ul class="quality-list">
          <li><strong>Pedane da esterno e pavimentazioni su misura:</strong> pedane, passerelle e scalinate per giardini, terrazzi, tettoie e piscine, anche rialzate con basi robuste.</li>
          <li><strong>Travi e perline:</strong> tavole e travi di misure standard o su richiesta, in legno massiccio e lamellare.</li>
          <li><strong>Staccionate in legno per esterno:</strong> grigliati, recinzioni e complementi per delimitare e arredare gli spazi.</li>
          <li><strong>Piscine:</strong> pavimentazioni bordo piscina in legno, dalla progettazione all’installazione.</li>
          <li><strong>Gazebo in legno:</strong> strutture agili e robuste per creare sale indipendenti, aree relax e coperture arredative.</li>
          <li><strong>Pergolati in legno lamellare:</strong> pergole rustiche o moderne con legno trattato secondo le normative ambientali per carico e stabilità.</li>
        </ul>

        <div class="quality-grid">
          <div class="quality-card">
            <div class="quality-media">
              <img class="quality-photo" src="img/qualita/pedana.jpg" alt="Pedana e pavimentazione in legno Tech Wood">
            </div>
            <div class="quality-chip">Pedane</div>
            <h4>Passerelle e pavimenti</h4>
            <p>Pedane e camminamenti stabili con legni trattati e basi robuste per giardini, terrazzi e bordo piscina.</p>
          </div>

          <div class="quality-card">
            <div class="quality-media">
              <img class="quality-photo" src="img/strutture/immlavori1.jpg" alt="Pergolato in legno lamellare Tech Wood">
            </div>
            <div class="quality-chip">Pergolati</div>
            <h4>Legno lamellare</h4>
            <p>Pergole rustiche o moderne in lamellare trattato, conformi alle normative per carico e stabilità.</p>
          </div>

          <div class="quality-card">
            <div class="quality-media">
              <img class="quality-photo" src="img/strutture/immlavori4.jpg" alt="Bordo piscina in legno Tech Wood">
            </div>
            <div class="quality-chip">Piscine</div>
            <h4>Bordo e solarium</h4>
            <p>Rivestimenti e decking in legno per piscine, progettati e installati su misura per resistere all’acqua.</p>
          </div>
        </div>

        <div class="panel-highlight">
          Trattiamo il legno per garantirne durata, stabilità e un’integrazione armoniosa con l’ambiente circostante.
        </div>
      </div>
    </div>
  </div>


  <!-- =========================
       SCRIPT: OVERLAY + SLIDESHOW + PRELOADER
       ========================= -->
  <script>
    // Apri/chiudi popup
    function openOverlay(name) {
      const overlay = document.getElementById("overlay-" + name);
      if (overlay) overlay.classList.add("active");
    }
    function closeOverlay(name) {
      const overlay = document.getElementById("overlay-" + name);
      if (overlay) overlay.classList.remove("active");
    }

    // Galleria lavori per sottomenù
    const workGallery = {
      pergole: [
        { src: "img/pergole/pergole1.jpg", alt: "Pergola in legno Tech Wood" },
        { src: "img/pergole/pergole2.jpg", alt: "Pergola Tech Wood - dettaglio" },
        { src: "img/pergole/pergole3.jpg", alt: "Pergola in legno Tech Wood" },
        { src: "img/pergole/pergole4.jpg", alt: "Pergola Tech Wood - dettaglio" },
        { src: "img/pergole/pergole5.jpg", alt: "Pergola in legno Tech Wood" }
      ],
      carporter: [
        { src: "img/carporter/carporter1.jpg", alt: "Carporter in legno Tech Wood" },
        { src: "img/carporter/carporter2.jpg", alt: "Carporter Tech Wood - copertura" },
        { src: "img/carporter/carporter3.jpg", alt: "Carporter in legno Tech Wood" },
        { src: "img/carporter/carporter4.jpg", alt: "Carporter Tech Wood - copertura" },
        { src: "img/carporter/carporter5.jpg", alt: "Carporter in legno Tech Wood" },
        { src: "img/carporter/carporter6.jpg", alt: "Carporter in legno Tech Wood" },
        { src: "img/carporter/carporter7.jpg", alt: "Carporter in legno Tech Wood" },
        { src: "img/carporter/carporter8.jpg", alt: "Carporter in legno Tech Wood" },
        { src: "img/carporter/carporter9.jpg", alt: "Carporter in legno Tech Wood" },
        { src: "img/carporter/carporter10.jpg", alt: "Carporter Tech Wood - copertura" },
        { src: "img/carporter/carporter11.jpg", alt: "Carporter in legno Tech Wood" },
      ],


      "area-bimbi": [
        { src: "img/area-bimbi/area-bimbi1.jpg", alt: "Area bimbi in legno Tech Wood" },
        { src: "img/area-bimbi/area-bimbi2.jpg", alt: "Area bimbi in legno Tech Wood" }

      ],
      "rivestimenti-piscine": [
        { src: "img/piscine/piscine1.jpg", alt: "Rivestimento piscina in legno Tech Wood" },
        { src: "img/piscine/piscine2.jpg", alt: "Rivestimento piscina in legno Tech Wood" },
        { src: "img/piscine/piscine3.jpg", alt: "Rivestimento piscina in legno Tech Wood" },
        { src: "img/piscine/piscine4.jpg", alt: "Rivestimento piscina in legno Tech Wood" },
        { src: "img/piscine/piscine5.jpg", alt: "Rivestimento piscina in legno Tech Wood" },

      ],
      rimesse: [
       { src: "img/rimesse/rimesse1.jpg", alt: "Rimessa in legno Tech Wood" },
       { src: "img/rimesse/rimesse2.jpg", alt: "Rimessa in legno Tech Wood" },
       { src: "img/rimesse/rimesse3.jpg", alt: "Rimessa in legno Tech Wood" },
       { src: "img/rimesse/rimesse4.jpg", alt: "Rimessa in legno Tech Wood" },
       { src: "img/rimesse/rimesse5.jpg", alt: "Rimessa in legno Tech Wood" },
       { src: "img/rimesse/rimesse6.jpg", alt: "Rimessa in legno Tech Wood" },
       { src: "img/rimesse/rimesse7.jpg", alt: "Rimessa in legno Tech Wood" },
       { src: "img/rimesse/rimesse8.jpg", alt: "Rimessa in legno Tech Wood" },
       { src: "img/rimesse/rimesse9.jpg", alt: "Rimessa in legno Tech Wood" },
       { src: "img/rimesse/rimesse10.jpg", alt: "Rimessa in legno Tech Wood" },
       { src: "img/rimesse/rimesse11.jpg", alt: "Rimessa in legno Tech Wood" },
       { src: "img/rimesse/rimesse12.jpg", alt: "Rimessa in legno Tech Wood" },
       { src: "img/rimesse/rimesse13.jpg", alt: "Rimessa in legno Tech Wood" },
       { src: "img/rimesse/rimesse14.jpg", alt: "Rimessa in legno Tech Wood" },
      ],
      studi: [
        { src: "img/studi/studi1.jpg", alt: "Studio in legno Tech Wood" },
        { src: "img/studi/studi2.jpg", alt: "Studio in legno Tech Wood" },

      ]
    };

    const workLabels = {
      pergole: "Pergole",
      carporter: "Carporter",
      "area-bimbi": "Area bimbi",
      "rivestimenti-piscine": "Rivestimenti piscine",
      rimesse: "Rimesse",
      studi: "Studi"
    };

    function openWorkDetail(key) {
      const gallery = workGallery[key];
      const overlay = document.getElementById("overlay-work-detail");
      const titleEl = document.getElementById("work-detail-title");
      const grid = document.getElementById("work-detail-grid");

      if (!gallery || !overlay || !titleEl || !grid) return;

      titleEl.textContent = workLabels[key] || "Lavori";
      grid.innerHTML = "";

      gallery.forEach(function (item) {
        const card = document.createElement("div");
        card.className = "works-card";
        const img = document.createElement("img");
        img.src = item.src;
        img.alt = item.alt || titleEl.textContent;
        card.appendChild(img);
        grid.appendChild(card);
      });

      overlay.classList.add("active");
    }

    // Viewer immagini fullscreen per i lavori
    function openImageViewer(src, altText) {
      const overlay = document.getElementById("overlay-image-viewer");
      const img = document.getElementById("image-viewer-img");
      if (!overlay || !img) return;
      img.src = src;
      img.alt = altText || "Immagine";
      overlay.classList.add("active");
    }

    // Gestisce la chiusura del viewer senza chiudere altri overlay
    document.addEventListener("click", function (event) {
      const viewer = document.getElementById("overlay-image-viewer");
      if (viewer && viewer.classList.contains("active")) {
        const panel = viewer.querySelector(".panel");
        if (panel && !panel.contains(event.target)) {
          viewer.classList.remove("active");
        }
        event.stopPropagation();
        event.stopImmediatePropagation();
      }
    }, true);

    // Chiudi cliccando fuori dal pannello
    document.addEventListener("click", function (event) {
      const clickedPanel = event.target.closest(".panel");
      if (clickedPanel) return;

      const openOverlays = document.querySelectorAll(".overlay.active");
      openOverlays.forEach(function (overlay) {
        if (!event.target.closest(".menu-card") &&
            !event.target.closest(".hero-bar")) {
          overlay.classList.remove("active");
        }
      });
    });

    // Clic su titoli e foto dei lavori per aprire il sottomenù
    document.addEventListener("DOMContentLoaded", function () {
      const workTriggers = document.querySelectorAll("[data-work-key]");
      workTriggers.forEach(function (trigger) {
        trigger.addEventListener("click", function (event) {
          event.preventDefault();
          event.stopPropagation();
          const key = trigger.getAttribute("data-work-key");
          openWorkDetail(key);
        });
      });

      // Clic sulle immagini del dettaglio per vederle intere
      const workDetail = document.getElementById("overlay-work-detail");
      if (workDetail) {
        workDetail.addEventListener("click", function (event) {
          const img = event.target.closest(".works-card img");
          if (img) {
            event.preventDefault();
            event.stopPropagation();
            openImageViewer(img.src, img.alt);
          }
        });
      }
    });

    // Chiudi con ESC
    document.addEventListener("keydown", function (event) {
      if (event.key === "Escape") {
        document.querySelectorAll(".overlay.active").forEach(o => o.classList.remove("active"));
      }
    });

    // =========================
    // SLIDESHOW HERO ADATTIVO (desktop/mobile)
    // =========================
    (function(){
      const slides = Array.from(document.querySelectorAll(".hero-slide"));
      if (!slides.length) return;

      const mq = window.matchMedia("(max-width: 768px)");
      let current = -1;
      let timer = null;

      function isVisibleSlide(slide){
        return mq.matches
          ? !slide.classList.contains("auto-desktop")
          : !slide.classList.contains("auto-mobile");
      }

      function nextVisible(startIndex){
        let idx = startIndex;
        for(let i = 0; i < slides.length; i++){
          idx = (idx + 1) % slides.length;
          if(isVisibleSlide(slides[idx])) return idx;
        }
        return null; // nessuna slide visibile
      }

      function showSlide(index){
        slides.forEach((s,i)=>s.classList.toggle("is-active", i === index));
      }

      function setFirstVisible(){
        const first = nextVisible(-1);
        if(first === null) return;
        current = first;
        showSlide(current);
      }

      function startSlider(){
        if (timer) clearInterval(timer);
        setFirstVisible();
        mq.addEventListener("change", setFirstVisible);

        timer = setInterval(function(){
          const next = nextVisible(current);
          if(next === null) return;
          current = next;
          showSlide(current);
        }, 6000);
      }

      window.ebSetFirstVisibleHero = setFirstVisible;
      window.startHeroSlideshow = startSlider;
    })();

    // Classifica automaticamente le slide in base all'orientamento (mobile/desktop)
    window.addEventListener("load", () => {
      const imgs = document.querySelectorAll(".hero-slide img");

      imgs.forEach(img => {
        const slide = img.closest(".hero-slide");
        if (!slide) return;

        const w = img.naturalWidth;
        const h = img.naturalHeight;

        slide.classList.remove("auto-mobile", "auto-desktop");

        if (h > w) {
          slide.classList.add("auto-mobile");
        } else {
          slide.classList.add("auto-desktop");
        }
      });

      if (typeof window.ebSetFirstVisibleHero === "function") {
        window.ebSetFirstVisibleHero();
      }
    });

    // =========================
    // PRELOADER TECH WOOD + TOPBAR LOGO/PROGRESS
    // =========================
    document.addEventListener("DOMContentLoaded", function () {
      const preloader = document.getElementById("tw-preloader");
      const hero = document.querySelector(".hero");
      let slidesStarted = false;
      const preloadStart = performance.now();
      const MIN_PRELOAD = 1800; // mostra il preload almeno 1.8s per intero

      const startSlidesSafely = () => {
        if (slidesStarted) return;
        slidesStarted = true;
        if (window.startHeroSlideshow) window.startHeroSlideshow();
      };

      const showPage = () => {
        if (preloader) {
          preloader.classList.add("fly-out");
          setTimeout(() => preloader.classList.add("hidden"), 900);
        }
        document.body.classList.remove("loading");
        document.body.classList.add("preload-complete");
        if (hero) {
          hero.style.willChange = "opacity";
          hero.style.transition = "opacity 0.9s ease";
          hero.style.opacity = "1";
        }
        // Avvia lo slideshow subito dopo l'uscita del preload per mantenere il ritmo
        if (preloader) {
          setTimeout(startSlidesSafely, 900);
        } else {
          startSlidesSafely();
        }
      };

      const fadeTimer = setTimeout(() => {
        if (preloader) preloader.classList.add("fade-out-logo");
      }, 1200);

      const fallbackTimer = setTimeout(showPage, 4000);

      window.addEventListener("load", () => {
        clearTimeout(fadeTimer);
        clearTimeout(fallbackTimer);
        const elapsed = performance.now() - preloadStart;
        const delay = Math.max(0, MIN_PRELOAD - elapsed);
        setTimeout(showPage, delay);
      });
    });
  </script>

</body>
</html>
